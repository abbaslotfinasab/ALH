{% extends "base.html" %}
{% load static %}

{% block extra_head %}
<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Service",
    "name": "{{ service.title|escapejs }}",
    "description": "{{ service.description|truncatewords:40|escapejs }}",
    "url": "{{ request.build_absolute_uri }}",
    "serviceType": "{{ service.title|escapejs }}",
    "provider": {
        "@type": "Organization",
        "name": "abbaslotfinasab.ir",
        "url": "https://abbaslotfinasab.ir",
        "logo": {
            "@type": "ImageObject",
            "url": "{% static 'images/logo.png' %}"
        }
    },
    "areaServed": {
        "@type": "Place",
        "name": "ایران"
    },
    "offers": {
        "@type": "Offer",
        "priceCurrency": "IRR",
        "availability": "https://schema.org/InStock",
        "url": "{{ request.build_absolute_uri }}"
    },
    "image": [
        "{{ service.image.url|default:static('images/logo.png') }}"
    ],
    "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "{{ service.rating|default:'5.0' }}",
        "reviewCount": "{{ service.review_count|default:'10' }}"
    }
}
</script>
{% endblock %}


{% block content %}
<section class="service-section py-5">
  <div class="container my-5">
    <div class="row g-4">

      <!-- ستون تصویر -->
      <div class="col-lg-12">
        <div id="serviceCarousel" class="carousel slide rounded shadow overflow-hidden" data-bs-ride="carousel">
          <div class="carousel-inner">
            <div class="carousel-item active">
              <img src="{{ service.image.url }}" class="d-block w-100" alt="{{ service.title }}">
            </div>
          </div>
        </div>
      </div>

      <!-- ستون توضیحات + تکنولوژی‌ها -->
      <div class="col-lg-8">
        <div class="service-card p-4 p-md-5 rounded-4 shadow-sm bg-white border h-100">
          <h1 class="fw-bold">{{ service.title }}</h1>
          <p class="text-muted">{{ service.short_desc }}</p>
          <hr>
          <p>{{ service.content|linebreaks }}</p>
        </div>
      </div>

      <div class="col-lg-4">
        <div class="card ground-box p-3 rounded-4 shadow-sm border h-100">
          <h4 class="hero-title text-white fw-semibold mb-4 text-center">تکنولوژی‌ها</h4>
          <div class="d-flex flex-wrap gap-3 justify-content-center">
            {% for technology in service.technologies.all %}
            <div class="card border-0 shadow-sm text-center" style="width: 7rem;">
              <div class="p-3">
                <i class="{{ technology.icon|default:'fas fa-code' }} fa-2x"></i>
              </div>
              <div class="card-body p-2">
                <h6 class="card-title">{{ technology.name }}</h6>
              </div>
            </div>
            {% endfor %}
          </div>
        </div>
      </div>

    </div>
  </div>
</section>


{% endblock %}
